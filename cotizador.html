<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotizador de Administración - InfoComunidad</title>
    <link rel="stylesheet" href="assets/css/styles.min.css">
    <link rel="icon" type="image/png" href="assets/img/favicon.png">
</head>
<body>
    <header></header>
    
    <section class="hero-cotizador">
    <div class="container-narrow">
      <h1>Calculadora de Cuotas</h1>
      <p>Obtenga una estimación inmediata del coste de administración para su finca.</p>
    </div>
  </section>

  <div class="container-narrow">
    <div class="progress-bar">
    <div class="progress-fill" id="progress" data-progress="0%"></div>
</div>
    
    <div class="card-form">
      <form id="cotizadorForm">
        
        <!-- STEP 1: CONTACT -->
        <div class="step active" id="step-1">
          <h2>1. Datos de contacto</h2>
          <div class="grid-2">
            <div class="field"><label>Nombre</label><input type="text" id="nombre" required></div>
            <div class="field"><label>Apellidos</label><input type="text" id="apellidos" required></div>
          </div>
          <div class="grid-2">
            <div class="field"><label>Teléfono</label><input type="tel" id="telefono" required></div>
            <div class="field"><label>Email</label><input type="email" id="email" required></div>
          </div>
          
          <div class="legal-consent">
  <input type="checkbox" id="legal_consent" required>
  <label for="legal_consent" class="legal-text">
    Acepto la <span class="legal-link" onclick="openModal()" style="color: var(--accent); cursor: pointer; text-decoration: underline;">Política de Privacidad y Protección de Datos</span>.
  </label>
</div>

          <div class="actions">
            <button type="button" class="btn btn-primary" onclick="validarPaso1()">Continuar</button>
          </div>
        </div>

        <!-- STEP 2: LOCATION -->
        <div class="step" id="step-2">
          <h2>2. Ubicación de la Finca</h2>
          <div class="field">
            <label>Dirección del Edificio</label>
            <input type="text" id="direccion" placeholder="Escriba la calle y número..." required>
            <div id="map" style="width: 100%; height: 300px; margin-top: 20px; border-radius: 8px; display: none;"></div>
            <div id="map"></div>
          </div>
          <div class="grid-2">
            <div class="field"><label>Año Construcción</label><input type="number" id="anoConstruccion" value="2000"></div>
            <div class="field">
              <label>Necesidad principal / Situación</label>
              <select id="motivo">
                <option value="Información general">Información general</option>
                <option value="Ahorro de costes">Reducción de gastos</option>
                <option value="Mejora de transparencia">Transparencia en cuentas</option>
                <option value="Problemas técnicos">Gestión de obras</option>
                <option value="Comunidad sin administrador">Comunidad sin administrador (Autogestión)</option>
              </select>
            </div>
          </div>
          <div class="actions">
            <button type="button" class="btn btn-outline" onclick="irAlPaso(1)">Atrás</button>
            <button type="button" class="btn btn-primary" onclick="irAlPaso(3)">Siguiente</button>
          </div>
        </div>

        <!-- STEP 3: SIZE -->
        <div class="step" id="step-3">
          <h2>3. Tamaño de la Comunidad</h2>
          <div class="grid-4">
            <div class="field"><label>Viviendas</label><input type="number" id="viviendas" value="10"></div>
            <div class="field"><label>Portales</label><input type="number" id="portales" value="1"></div>
            <div class="field"><label>Plantas</label><input type="number" id="plantas" value="3"></div>
            <div class="field"><label>Ascensores</label><input type="number" id="ascensores" value="1"></div>
          </div>
          <div class="grid-4">
            <div class="field"><label>Garajes</label><input type="number" id="garajes" value="0"></div>
            <div class="field"><label>Locales</label><input type="number" id="locales" value="0"></div>
            <div class="field"><label>Trasteros</label><input type="number" id="trasteros" value="0"></div>
            <div class="field"><label>Salas Com.</label><input type="number" id="salasComunes" value="0"></div>
          </div>
          <div class="actions">
            <button type="button" class="btn btn-outline" onclick="irAlPaso(2)">Atrás</button>
            <button type="button" class="btn btn-primary" onclick="irAlPaso(4)">Siguiente</button>
          </div>
        </div>

        <!-- STEP 4: SERVICES -->
        <div class="step" id="step-4">
          <h2>4. Instalaciones y Servicios</h2>
          <fieldset>
            <legend>Elementos Comunes</legend>
            <div class="grid-2" style="gap: 10px;">
                <label class="check-item"><input type="checkbox" id="piscina"> Piscina Comunitaria</label>
                <label class="check-item"><input type="checkbox" id="jardines"> Zonas Ajardinadas</label>
                <label class="check-item"><input type="checkbox" id="calefaccionCentral"> Calefacción / ACS Central</label>
                <label class="check-item"><input type="checkbox" id="placasSolares"> Energía Solar</label>
                <label class="check-item"><input type="checkbox" id="garajesPCI"> Garajes con PCI / Ventilación</label>
                <label class="check-item"><input type="checkbox" id="videoportero"> Videoportero / Control de accesos</label>
            </div>
          </fieldset>
          <fieldset>
            <legend>Servicios Actuales</legend>
            <div class="grid-2" style="gap: 10px;">
                <label class="check-item"><input type="checkbox" id="limpieza"> Servicio de Limpieza</label>
                <label class="check-item"><input type="checkbox" id="jardineria"> Mantenimiento Jardín</label>
                <label class="check-item"><input type="checkbox" id="seguridad"> Conserjería / Seguridad</label>
                <label class="check-item"><input type="checkbox" id="mantenimiento"> Mantenimiento Integral</label>
            </div>
          </fieldset>
          <div class="actions">
            <button type="button" class="btn btn-outline" onclick="irAlPaso(3)">Atrás</button>
            <button type="button" class="btn btn-primary" onclick="calcularYMostrar()">Calcular Estimación</button>
          </div>
        </div>

        <!-- STEP 5: RESULT -->
        <div class="step" id="step-5">
          <div class="step-center">
            <h2>Estimación Mensual</h2>
            <div class="step-center">
            <span class="precio-tag" id="precioMensual">0</span>
            <span style="font-size: 1.5rem; color: var(--primary); font-weight: 700;"> € / mes</span>
            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--muted)">(Honorarios aproximados de administración)</p>
          </div>
          <div class="actions">
            <button type="button" class="btn btn-outline" onclick="irAlPaso(4)">Atrás</button>
            <button type="button" class="btn btn-primary" onclick="enviarAGoogleForms()" id="btnEnviar">Finalizar</button>
          </div>
          </div>
        </div>

        <!-- STEP 6: SUCCESS -->
        <div class="step" id="step-6">
            <div class="step-center">
                <div class="success-icon"><i class="fi fi-rr-check"></i></div>
                <h2 style="margin-bottom: 10px;">¡Solicitud enviada con éxito!</h2>
                <p style="color: var(--muted); max-width: 480px; margin: 0 auto 30px;">
                    Tenga en cuenta que la valoración facilitada es <strong>meramente orientativa</strong>. El precio definitivo se determinará tras una entrevista personalizada con un administrador para conocer los detalles específicos de su comunidad.
                </p>
                <div class="actions">
                    <a href="directorio.html" class="btn btn-primary" style="text-decoration: none;">Buscar Administradores</a>
                </div>
            </div>
        </div>

      </form>
    </div>
  </div>

  <footer>
  </footer>

  <script src="https://maps.googleapis.com/maps/api/js?key=TU_API_KEY&libraries=places&callback=initAutocomplete" async defer></script>
  <script src="assets/js/main.min.js"></script>
</body>
</html>